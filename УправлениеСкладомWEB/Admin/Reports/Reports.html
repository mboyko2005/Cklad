<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Аналитика и отчёты</title>
  
  <!-- Подключаем иконку сайта (favicon) -->
  <link rel="icon" href="../../Логотип.ico" type="image/x-icon" />

  <!-- Файл стилей для отчётов -->
  <link rel="stylesheet" href="Reports.css" />
  
  <!-- Remix Icon для иконок -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet" />
  
  <!-- Chart.js для построения диаграмм -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <!-- jsPDF для экспорта в PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  
  <!-- ExcelJS для экспорта в Excel -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/exceljs/4.3.0/exceljs.min.js"></script>
  
  <!-- FileSaver для сохранения файлов (Excel, Word) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  
  <!-- docx для экспорта в Word -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/docx/7.3.0/docx.umd.js"></script>
</head>
<body>
  <!-- Фоновые плавающие фигуры (вынесены в самый верх) -->
  <div class="background-shapes">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
    <div class="shape shape-4"></div>
  </div>

  <!-- Верхняя панель -->
  <header class="top-bar">
    <div class="back-button" id="backButton">
      <i class="ri-arrow-left-line"></i>
      <span>Назад</span>
    </div>
    <div class="page-title">
      <i class="ri-bar-chart-fill analytics-icon"></i>
      <span>Аналитика</span>
    </div>
    <!-- Иконка пользователя с выпадающим меню -->
    <div class="user-info">
      <div class="avatar">
        <i class="ri-user-line"></i>
      </div>
      <div class="user-menu">
        <button id="logoutBtn" class="user-menu-item">Выход из системы</button>
      </div>
    </div>
  </header>

  <!-- Основной контейнер -->
  <div class="container">
    <!-- Левая панель с выбором отчёта и экспортом -->
    <aside class="left-panel">
      <div class="panel-section">
        <h2>Выбор отчёта</h2>
        <div class="form-group">
          <label for="reportType">Тип отчёта:</label>
          <select id="reportType">
            <option value="mostSold">Самые продаваемые товары</option>
            <option value="systemUsers">Пользователи системы</option>
            <option value="totalCost">Общая стоимость товаров</option>
            <option value="currentStock">Текущие складские позиции</option>
          </select>
        </div>
        <div class="form-group">
          <label for="chartType">Тип диаграммы:</label>
          <select id="chartType">
            <option value="bar">Гистограмма</option>
            <option value="pie">Круговая</option>
            <option value="line">Линейная</option>
            <option value="doughnut">Кольцевая (Doughnut)</option>
            <option value="radar">Радар</option>
            <option value="polarArea">Полярная область</option>
            <option value="horizontalBar">Горизонтальная гистограмма</option>
            <option value="area">Область (Area)</option>
          </select>
        </div>
        <button id="generateReportBtn" class="btn btn-primary">Сгенерировать отчёт</button>
      </div>
      <div class="panel-section">
        <h2>Экспорт</h2>
        <div class="form-group">
          <label for="exportFormat">Экспортировать как:</label>
          <select id="exportFormat">
            <option value="png">PNG</option>
            <option value="pdf">PDF</option>
            <option value="excel">Excel (XLSX)</option>
            <option value="word">Word (DOCX)</option>
          </select>
        </div>
        <button id="exportReportBtn" class="btn btn-secondary">Экспортировать</button>
      </div>
    </aside>

    <!-- Правая панель для отображения диаграммы -->
    <main class="right-panel">
      <div class="chart-container" id="chartContainer">
        <!-- Заголовок и кнопка полноэкранного режима -->
        <div class="chart-header">
          <h2 id="chartTitle">Отчёт</h2>
          <div class="fullscreen-btn" id="fullscreenBtn">
            <i class="ri-fullscreen-line"></i>
          </div>
        </div>
        <div class="chart-wrapper">
          <canvas id="reportChart"></canvas>
        </div>
      </div>
    </main>
  </div>

  <!-- Уведомление (toast) -->
  <div id="notification" class="notification">
    <i id="notificationIcon" class="ri-information-line"></i>
    <span id="notificationMessage"></span>
  </div>

  <!-- Скрипт для работы отчётов -->
  <script src="Reports.js"></script>
</body>
</html>
